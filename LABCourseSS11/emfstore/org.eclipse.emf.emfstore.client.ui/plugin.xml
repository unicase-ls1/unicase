<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
  <extension-point id="org.eclipse.emf.emfstore.client.ui.merge.customoption" name="customoption" schema="schema/org.eclipse.emf.emfstore.client.ui.customoption.exsd"/>
  <extension-point id="org.eclipse.emf.emfstore.client.ui.commitdialog.tray" name="org.eclipse.emf.emfstore.client.ui.commitdialog.tray" schema="schema/org.eclipse.emf.emfstore.client.ui.commitdialog.tray.exsd"/>
  <extension-point id="org.eclipse.emf.emfstore.client.ui.views.historybrowsercomparator" name="HistoryBrowserCompare" schema="LABCourseSS11/emfstore/org.eclipse.emf.emfstore.client.ui/schema/org.eclipse.emf.emfstore.client.ui.views.historybrowsercomparator.exsd"/>
  <extension
        point="org.eclipse.ui.handlers">
      <handler
            class="org.eclipse.emf.emfstore.client.ui.commands.RevertHandler"
            commandId="org.eclipse.emf.emfstore.client.ui.revert">
         <enabledWhen>
            <and>
               <iterate
                     ifEmpty="true"
                     operator="and">
                  <instanceof
                        value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="org.eclipse.emf.emfstore.client.ui.commands.projectHasLocalChanges"
                        value="true">
                  </test>
               </iterate>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.emf.emfstore.client.ui.commands.UndoLastOperationHandler"
            commandId="org.eclipse.emf.emfstore.client.ui.undoLastOperation">
         <enabledWhen>
            <and>
               <iterate
                     ifEmpty="true"
                     operator="and">
                  <instanceof
                        value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="org.eclipse.emf.emfstore.client.ui.commands.projectHasLocalChanges"
                        value="true">
                  </test>
               </iterate>
            </and>
         </enabledWhen>
      </handler>
     <handler
           class="org.eclipse.emf.emfstore.client.ui.commands.ImportChangesHandler"
           commandId="org.eclipse.emf.emfstore.client.ui.importChanges">
        <enabledWhen>
           <and>
              <iterate
                    ifEmpty="true"
                    operator="and">
                 <instanceof
                       value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                 </instanceof>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.projectHasLocalChanges"
                       value="true">
                 </test>
              </iterate>
           </and>
        </enabledWhen>
     </handler>
     <handler
           class="org.eclipse.emf.emfstore.client.ui.commands.CommitProjectHandler"
           commandId="org.eclipse.emf.emfstore.client.ui.commitProject">
        <enabledWhen>
           <and>
              <iterate
                    ifEmpty="true"
                    operator="and">
                 <instanceof
                       value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                 </instanceof>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.projectHasLocalChanges"
                       value="true">
                 </test>
              </iterate>
           </and>
        </enabledWhen>
     </handler>
  </extension>
  <extension
        point="org.eclipse.ui.commands">
     <category
           id="org.eclipse.emf.emfstore.client.ui.project"
           name="ECP">
     </category>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           id="org.eclipse.emf.emfstore.client.ui.commitProject"
           name="commit">
     </command>
     <command
           id="org.eclipse.emf.emfstore.client.ui.importChanges"
           name="importChanges">
     </command>
     <command
           id="org.eclipse.emf.emfstore.client.ui.undoLastOperation"
           name="undoLastOperation">
     </command>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           id="org.eclipse.emf.emfstore.client.ui.revert"
           name="Revert">
     </command>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.UpdateProjectHandler"
           id="org.eclipse.emf.emfstore.client.ui.updateProject"
           name="update">
     </command>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ShareProjectHandler"
           id="org.eclipse.emf.emfstore.client.ui.shareProject"
           name="share">
     </command>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ImportProjectHandler"
           id="org.eclipse.emf.emfstore.client.ui.importProject"
           name="import">
     </command>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ExportProjectHandler"
           id="org.eclipse.emf.emfstore.client.ui.exportProject"
           name="export">
     </command>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.DeleteProjectHandler"
           id="org.eclipse.emf.emfstore.client.ui.deleteProject"
           name="deleteProject">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ShowHistoryHandler"
           id="org.eclipse.emf.emfstore.client.ui.commands.showHistory"
           name="showHistory">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.CompareProjectsHandler"
           id="org.eclipse.emf.emfstore.client.ui.compareProjects"
           name="compareProjects">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ExportChangesHandler"
           id="org.eclipse.emf.emfstore.client.ui.exportChanges"
           name="exportChanges">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ExportProjectSpaceHandler"
           id="org.eclipse.emf.emfstore.client.ui.exportProjectSpace"
           name="exportProjectSpace">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ExportWorkSpaceHandler"
           id="org.eclipse.emf.emfstore.client.ui.exportWorkSpace"
           name="exportWorkSpace">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ImportProjectSpaceHandler"
           id="org.eclipse.emf.emfstore.client.ui.importProjectSpace"
           name="importProjectSpace">
     </command>
 
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.UpdateProjectVersionHandler"
           id="org.eclipse.emf.emfstore.client.ui.updateProjectVersion"
           name="updateToVersion">
     </command>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ProjectPropertiesHandler"
           id="org.eclipse.emf.emfstore.client.ui.projectProperties"
           name="properties">
     </command>
     <command
           categoryId="org.eclipse.emf.emfstore.client.ui.project"
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.NewLocalProjectHandler"
           id="org.eclipse.emf.emfstore.client.ui.NewLocalProject"
           name="NewLocalProject">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.commands.ShowHistoryHandler"
           id="org.eclipse.emf.emfstore.client.ui.commands.ShowHistory"
           name="Show History">
     </command>
      <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.AddServerHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.AddServer"
           name="AddServer">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.ServerLoginHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.Login"
           name="Login">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.ChangeSessionHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.Logout"
           name="Logout">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.CreateProjectOnServerHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.CreateProjectOnServer"
           name="CreateProjectOnServer">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.DeleteProjectOnServerHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.DeleteProjectOnServer"
           name="DeleteProjectOnServer">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.DeleteServerInfoHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.RemoveServer"
           name="RemoveServer">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.ExportProjectHistoryHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ExportProjectHistory"
           name="ExportProjectHistory">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.ImportProjectHistoryHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ImportProjectHistory"
           name="ImportProjectHistory">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.ManageOrgUnitsHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ManageOrgUnits"
           name="ManageOrgUnits">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.ProjectCheckoutHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ProjectCheckout"
           name="ProjectCheckout">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.ProjectPropertiesHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ProjectProperties"
           name="ProjectProperties">
     </command>
     <command
           defaultHandler="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.handlers.ServerPropertiesHandler"
           id="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ServerProperties"
           name="ServerProperties">
     </command>
  </extension>
  <extension
        point="org.eclipse.ui.menus">
     <menuContribution
           locationURI="popup:org.eclipse.emf.ecp.navigator.viewer?before=additions">
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.commitProject"
              disabledIcon="icons/advanced.gif"
              icon="icons/arrow_right.png"
              label="Commit Project"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                    <test
                          forcePluginActivation="true"
                          property="org.eclipse.emf.emfstore.client.ui.commands.projectIsShared"
                          value="true">
                    </test>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.updateProject"
              icon="icons/arrow_up.png"
              label="Update Project"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                    <test
                          forcePluginActivation="true"
                          property="org.eclipse.emf.emfstore.client.ui.commands.projectIsShared"
                          value="true">
                    </test>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.updateProjectVersion"
              icon="icons/arrow_up.png"
              label="Update to version..."
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                    <test
                          forcePluginActivation="true"
                          property="org.eclipse.emf.emfstore.client.ui.commands.projectIsShared"
                          value="true">
                    </test>
                    <test
                          forcePluginActivation="true"
                          property="org.eclipse.emf.emfstore.client.ui.commands.isAdmin"
                          value="true">
                    </test>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.shareProject"
              icon="icons/arrow_out.png"
              label="Share  Project"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                    <test
                          forcePluginActivation="true"
                          property="org.eclipse.emf.emfstore.client.ui.commands.projectIsShared"
                          value="false">
                    </test>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
        <separator
              name="org.eclipse.emf.emfstore.client.ui.undoRevertCommands"
              visible="true">
        </separator>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.undoLastOperation"
              icon="icons/arrow_undo.png"
              label="Undo Last Operation"
              style="push"
              tooltip="Undo the last executed operation">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.revert"
              icon="icons/revert.png"
              label="Revert All Operations"
              style="push"
              tooltip="Reverts all operations since last commit">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
        <separator
              name="org.eclipse.emf.emfstore.client.ui.additionalCommands"
              visible="true">
        </separator>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.commands.showHistory"
              icon="icons/historyview.png"
              label="Show History"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                    <test
                          forcePluginActivation="true"
                          property="org.eclipse.emf.emfstore.client.ui.commands.projectIsShared"
                          value="true">
                    </test>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
        
        <separator
              name="org.eclipse.emf.emfstore.client.ui.otherCommands"
              visible="true">
        </separator>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.deleteProject"
              icon="icons/delete.gif"
              label="Delete Project"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
        <menu
              icon="icons/createrepos.gif"
              id="org.eclipse.emf.emfstore.client.ui.Other"
              label="Other...">
           <menu
                 icon="icons/database_go.png"
                 label="Export">
              <command
                    commandId="org.eclipse.emf.emfstore.client.ui.exportProject"
                    icon="icons/database_go.png"
                    label="Export Project"
                    style="push">
                 <visibleWhen
                       checkEnabled="false">
                    <and>
                       <iterate
                             ifEmpty="false"
                             operator="and">
                          	<instanceof
                                value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                          	</instanceof>
                       </iterate>
                       <count
                             value="1">
                       </count>
                    </and>
                 </visibleWhen>
              </command>
              <command
                    commandId="org.eclipse.emf.emfstore.client.ui.exportChanges"
                    icon="icons/database_go.png"
                    label="Export Changes"
                    style="push">
                 <visibleWhen
                       checkEnabled="false">
                    <and>
                       <iterate
                             ifEmpty="false"
                             operator="and">
                          <instanceof
                                value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                          </instanceof>
                          <test
                                forcePluginActivation="true"
                                property="org.eclipse.emf.emfstore.client.ui.commands.projectHasLocalChanges"
                                value="true">
                          </test>
                       </iterate>
                       <count
                             value="1">
                       </count>
                    </and>
                 </visibleWhen>
              </command>
              <command
                    commandId="org.eclipse.emf.emfstore.client.ui.exportProjectSpace"
                    icon="icons/database_go.png"
                    label="Export Projectspace"
                    style="push">
                 <visibleWhen
                       checkEnabled="false">
                    <and>
                       <iterate
                             ifEmpty="false"
                             operator="and">
                          <instanceof
                                value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                          </instanceof>
                       </iterate>
                       <count
                             value="1">
                       </count>
                    </and>
                 </visibleWhen>
              </command>
              <command
                    commandId="org.eclipse.emf.emfstore.client.ui.exportWorkSpace"
                    icon="icons/database_go.png"
                    label="Export Workspace"
                    style="push">
                 <visibleWhen
                       checkEnabled="false">
                    <and>
                       <or>
                          <count
                                value="0">
                          </count>
                          <count
                                value="1">
                          </count>
                       </or>
                       <iterate>
                          <not>
                             <instanceof
                                   value="org.eclipse.emf.ecore.EObject">
                             </instanceof>
                          </not>
                       </iterate>
                    </and>
                 </visibleWhen>
              </command>
           </menu>
           <menu
                 icon="icons/folder_go.png"
                 label="Import">
              <command
                    commandId="org.eclipse.emf.emfstore.client.ui.importChanges"
                    icon="icons/folder_go.png"
                    label="Import Changes"
                    style="push">
                 <visibleWhen
                       checkEnabled="false">           
                    <and>
                       <iterate
                             ifEmpty="false"
                             operator="and">
                          <instanceof
                                value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                          </instanceof>
                          <test
                                forcePluginActivation="true"
                                property="org.eclipse.emf.emfstore.client.ui.commands.projectHasLocalChanges"
                                value="false">
                          </test>
                       </iterate>
                       <count
                             value="1">
                       </count>
                    </and>
                 </visibleWhen>
              </command>
              <command
                    commandId="org.eclipse.emf.emfstore.client.ui.importProject"
                    icon="icons/folder_go.png"
                    label="Import Project"
                    style="push">
                 <visibleWhen
                       checkEnabled="false">
                    <and>
                       <or>
                          <count
                                value="0">
                          </count>
                          <count
                                value="1">
                          </count>
                       </or>
                    </and>
                 </visibleWhen>
              </command>
              <command
                    commandId="org.eclipse.emf.emfstore.client.ui.importProjectSpace"
                    icon="icons/folder_go.png"
                    label="Import Projectspace"
                    style="push">
                 <visibleWhen
                       checkEnabled="false">
                    <and>
                       <or>
                          <count
                                value="0">
                          </count>
                          <count
                                value="1">
                          </count>
                       </or>
                       <iterate>
                          <not>
                             <instanceof
                                   value="org.eclipse.emf.ecore.EObject">
                             </instanceof>
                          </not>
                       </iterate>
                    </and>
                 </visibleWhen>
              </command>
              <command
                    commandId="org.eclipse.emf.ecp.navigator.importModel"
                    icon="icons/folder_go.png"
                    label="Import Model Element"
                    style="push">
                 <visibleWhen
                       checkEnabled="false">
                    <and>
                       <iterate
                             ifEmpty="false"
                             operator="and">
                          <instanceof
                                value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                          </instanceof>
                       </iterate>
                       <count
                             value="1">
                       </count>
                    </and>
                 </visibleWhen>
              </command>
           </menu>
           
           <command
                 commandId="org.eclipse.emf.emfstore.client.ui.compareProjects"
                 icon="icons/compare.png"
                 label="Compare to ..."
                 style="push">
              <visibleWhen
                    checkEnabled="false">
                 <and>
                    <iterate
                          ifEmpty="false"
                          operator="and">
                       <instanceof
                             value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                       </instanceof>
                    </iterate>
                    <count
                          value="1">
                    </count>
                 </and>
              </visibleWhen>
           </command>
           <command
                 commandId="org.eclipse.emf.emfstore.client.ui.NewLocalProject"
                 icon="icons/serverAdd.png"
                 label="New Project..."
                 style="push">
              <visibleWhen
                    checkEnabled="false">
                 <and>
                    <or>
                       <count
                             value="0">
                       </count>
                       <count
                             value="1">
                       </count>
                    </or>
                    <iterate>
                       <or>
                          <instanceof
                                value="org.eclipse.emf.emfstore.client.model.ProjectSpace" />
                          <instanceof
                                value="org.eclipse.emf.emfstore.common.model.Project" />
                       </or>
                    </iterate>
                 </and>
              </visibleWhen>
           </command>
        </menu>
        <menu
              label="label">
        </menu>
        <separator
              name="org.eclipse.emf.emfstore.client.ui.scmCommands"
              visible="true">
        </separator>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.projectProperties"
              label="Properties"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <and>
                 <iterate
                       ifEmpty="false"
                       operator="and">
                    <instanceof
                          value="org.eclipse.emf.emfstore.client.model.ProjectSpace">
                    </instanceof>
                    <test
                          forcePluginActivation="true"
                          property="org.eclipse.emf.emfstore.client.ui.commands.projectIsShared"
                          value="true">
                    </test>
                 </iterate>
                 <count
                       value="1">
                 </count>
              </and>
           </visibleWhen>
        </command>
     </menuContribution>
     <menuContribution
            locationURI="popup:org.eclipse.emf.ecp.navigator.viewer?after=org.unicase.ui.stem.ShowInStatusView">
         <command
               commandId="org.eclipse.emf.emfstore.client.ui.commands.showHistory"
               icon="icons/historyview.png"
               label="Show History"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <count
                        value="1">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <reference
                           definitionId="org.eclipse.emf.ecp.common.commands.modelElement">
                     </reference>
                  </iterate>
               </and>
            </visibleWhen>
         </command>
         <separator
               name="org.eclipse.emf.emfstore.client.ui.commands.showHistoryViewSeperator"
               visible="true">
         </separator>
      </menuContribution>
     <menuContribution
           locationURI="toolbar:org.eclipse.emf.ecp.editor.MEEditorPage?after=additions">
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.commands.showHistory"
              icon="icons/historyview.png"
              label="Show History"
              style="push">
        </command>
     </menuContribution>
          <menuContribution
           locationURI="popup:org.eclipse.emf.emfstore.client.ui.views.RepositoryView?after=additions">
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.Login"
              icon="icons/serverLogin.png"
              label="Login"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.client.model.ServerInfo">
                 </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.ServerInfoIsLoggedIn"
                       value="false">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.Logout"
              icon="icons/lock.png"
              label="Logout"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.client.model.ServerInfo">
                 </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.ServerInfoIsLoggedIn"
                       value="true">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ProjectCheckout"
              icon="icons/checkout.png"
              label="Checkout"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.server.model.ProjectInfo">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.CreateProjectOnServer"
              icon="icons/projectAdd.png"
              label="Create new project..."
              style="push"
              tooltip="Create new project on the server">

           <visibleWhen
           		checkEnabled="false">
				<iterate
	               ifEmpty="false"
	               operator="and">
	                <test
	                    forcePluginActivation="true"
                        property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                        value="org.eclipse.emf.emfstore.client.model.ServerInfo">
                    </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.ServerInfoIsLoggedIn"
                       value="true">
                 </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.isServerAdmin"
                       value="true">
                 </test>
                 </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ManageOrgUnits"
              icon="icons/Group.gif"
              label="Manage Users/Groups..."
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.client.model.ServerInfo">
                 </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.ServerInfoIsLoggedIn"
                       value="true">
                 </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.isServerAdmin"
                       value="true">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ExportProjectHistory"
              icon="icons/database_go.png"
              label="Export project history"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.server.model.ProjectInfo">
                 </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.isServerAdmin"
                       value="true">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ImportProjectHistory"
              icon="icons/folder_go.png"
              label="Import Project History"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.server.model.ProjectInfo">
                 </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.isServerAdmin"
                       value="true">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.DeleteProjectOnServer"
              icon="icons/delete.gif"
              label="Delete on server"
              style="push"
              tooltip="Delete this project on the server">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.server.model.ProjectInfo">
                 </test>
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.isServerAdmin"
                       value="true">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.RemoveServer"
              icon="icons/delete.gif"
              label="Remove repository"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.client.model.ServerInfo">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.AddServer"
              icon="icons/serverAdd.png"
              label="New Repository..."
              style="push"
              tooltip="Adds a new EMFStore Repository">
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ProjectProperties"
              icon="icons/info.png"
              label="Properties"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.server.model.ProjectInfo">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
        <command
              commandId="org.eclipse.emf.emfstore.client.ui.repositorybrowser.ServerProperties"
              icon="icons/serverEdit.png"
              label="Properties"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <iterate
                    ifEmpty="false"
                    operator="and">
                 <test
                       forcePluginActivation="true"
                       property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                       value="org.eclipse.emf.emfstore.client.model.ServerInfo">
                 </test>
              </iterate>
           </visibleWhen>
        </command>
     </menuContribution>
          <menuContribution
                locationURI="popup:org.eclipse.emf.emfstore.client.ui.views.historybrowserview.HistoryBrowserView">
             <command
                   commandId="org.eclipse.emf.emfstore.client.ui.historybrowserview.addtag"
                   label="Add tag"
                   style="push"
                   tooltip="Add a new tag to this revision">
                <visibleWhen
                      checkEnabled="false">
                   <iterate
                         ifEmpty="true"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                            value="org.eclipse.emf.emfstore.server.model.versioning.HistoryInfo">
                      </test>
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.historyBrowserAdminTester"
                            value="true">
                      </test>
                   </iterate>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.emf.emfstore.client.ui.historybrowserview.removetag"
                   label="Remove tag"
                   style="push"
                   tooltip="Remove an existing tag">
                <visibleWhen
                      checkEnabled="false">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                            value="org.eclipse.emf.emfstore.server.model.versioning.HistoryInfo">
                      </test>
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.historyBrowserAdminTester"
                            value="true">
                      </test>
                   </iterate>
                </visibleWhen>
             </command>
             <separator
                   name="org.eclipse.emf.emfstore.client.ui.historybrowserview.tagseparator"
                   visible="true">
             </separator>
             <command
                   commandId="org.eclipse.emf.emfstore.client.ui.historybrowserview.checkout"
                   label="Checkout this revision"
                   style="push"
                   tooltip="Checkout this revision of the project">
                <visibleWhen
                      checkEnabled="false">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                            value="org.eclipse.emf.emfstore.server.model.versioning.HistoryInfo">
                      </test>
                   </iterate>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.emf.emfstore.client.ui.historybrowserview.revert"
                   label="Revert this revision"
                   style="push"
                   tooltip="Revert this revision of the project, the reversed changes between the previous revision has been applied">
                <visibleWhen
                      checkEnabled="false">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                            value="org.eclipse.emf.emfstore.server.model.versioning.HistoryInfo">
                      </test>
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.historyBrowserAdminTester"
                            value="true">
                      </test>
                   </iterate>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.emf.emfstore.client.ui.historybrowserview.forcerevert"
                   label="Force to revert this revision"
                   style="push"
                   tooltip="Force to revert, the reversed changes between the previous revision has been applied">
                <visibleWhen
                      checkEnabled="false">
                   <iterate
                         ifEmpty="false"
                         operator="and">
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
                            value="org.eclipse.emf.emfstore.server.model.versioning.HistoryInfo">
                      </test>
                      <test
                            forcePluginActivation="true"
                            property="org.eclipse.emf.emfstore.client.ui.commands.historyBrowserAdminTester"
                            value="true">
                      </test>
                   </iterate>
                </visibleWhen>
             </command>
             <command
                   commandId="org.eclipse.emf.emfstore.client.ui.historybrowserview.compareRevisions"
                   label="Compare Revisions"
                   style="push">
                <visibleWhen
                      checkEnabled="false">
                </visibleWhen>
             </command>
          </menuContribution>
  </extension>
  
 
     
     <extension
           point="org.eclipse.ui.bindings">
        <key
              commandId="org.eclipse.emf.emfstore.client.ui.commitProject"
              contextId="org.eclipse.ui.contexts.window"
              schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
              sequence="Alt+C">
        </key>
        <key
              commandId="org.eclipse.emf.emfstore.client.ui.updateProject"
              contextId="org.eclipse.ui.contexts.window"
              schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
              sequence="Alt+P">
        </key>
        <key
              commandId="org.eclipse.emf.emfstore.client.ui.deleteProject"
              contextId="org.eclipse.ui.contexts.window"
              schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
              sequence="Alt+Delete">
        </key>
        <key
              commandId="org.eclipse.emf.emfstore.client.ui.projectProperties"
              contextId="org.eclipse.ui.contexts.window"
              schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
              sequence="Alt+E">
        </key>
     </extension>
     <extension
           point="org.eclipse.core.expressions.propertyTesters">
        <propertyTester
              class="org.eclipse.emf.emfstore.client.ui.commands.ProjectIsSharedTester"
              id="org.eclipse.emf.emfstore.client.ui.commands.projectIsSharedTester"
              namespace="org.eclipse.emf.emfstore.client.ui.commands"
              properties="projectIsShared"
              type="org.eclipse.emf.emfstore.client.model.ProjectSpace">
        </propertyTester>
        <propertyTester
              class="org.eclipse.emf.emfstore.client.ui.commands.ProjectHasLocalChangesTester"
              id="org.eclipse.emf.emfstore.client.ui.commands.projectHasLocalChangesTester"
              namespace="org.eclipse.emf.emfstore.client.ui.commands"
              properties="projectHasLocalChanges"
              type="org.eclipse.emf.emfstore.client.model.ProjectSpace">
        </propertyTester>
        <propertyTester
              class="org.eclipse.emf.emfstore.client.ui.commands.IsAdminTester"
              id="org.eclipse.emf.emfstore.client.ui.commands.isAdminTester"
              namespace="org.eclipse.emf.emfstore.client.ui.commands"
              properties="isAdmin"
              type="org.eclipse.emf.emfstore.client.model.ProjectSpace">
        </propertyTester>
        <propertyTester
              class="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.HistoryBrowserAdminTester"
              id="org.eclipse.emf.emfstore.client.ui.commands.historyBrowserAdminTester"
              namespace="org.eclipse.emf.emfstore.client.ui.commands"
              properties="historyBrowserAdminTester"
              type="org.eclipse.emf.emfstore.client.ui.views.scm.SCMTreeNode">
        </propertyTester>
        <propertyTester
              class="org.eclipse.emf.emfstore.client.ui.commands.IsACUserTester"
              id="org.eclipse.emf.emfstore.client.ui.commands.isACUserTester"
              namespace="org.eclipse.emf.emfstore.client.ui.commands"
              properties="isACUser"
              type="org.eclipse.emf.emfstore.client.model.ProjectSpace">
        </propertyTester>
        <propertyTester
              class="org.eclipse.emf.emfstore.client.ui.commands.IsServerAdminTester"
              id="org.eclipse.emf.emfstore.client.ui.commands.isServerAdminTester"
              namespace="org.eclipse.emf.emfstore.client.ui.commands"
              properties="isServerAdmin"
              type="org.eclipse.jface.viewers.TreeNode">
        </propertyTester>
        <propertyTester
              class="org.eclipse.emf.emfstore.client.ui.commands.ServerInfoIsLoggedInTester"
              id="org.eclipse.emf.emfstore.client.ui.commands.ServerInfoIsLoggedIn"
              namespace="org.eclipse.emf.emfstore.client.ui.commands"
              properties="ServerInfoIsLoggedIn"
              type="org.eclipse.jface.viewers.TreeNode">
        </propertyTester>
              <propertyTester
              class="org.eclipse.emf.emfstore.client.ui.commands.TreeNodeClassTester"
              id="org.eclipse.emf.emfstore.client.ui.commands.treeNodeClassTester"
              namespace="org.eclipse.emf.emfstore.client.ui.commands"
              properties="treeNodeClassTester"
              type="org.eclipse.jface.viewers.TreeNode">
        </propertyTester>
     </extension>
        
           <extension
         point="org.eclipse.ui.views">
      <category
            name="ECP"
            id="org.eclipse.emf.ecp">
      </category>
      <view
            name="EmfStore Browser"
            icon="icons/serverDB.png"
            category="org.eclipse.emf.ecp"
            class="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.views.ESBrowserView"
            id="org.eclipse.emf.emfstore.client.ui.views.RepositoryView">
      </view>
      <view
            allowMultiple="false"
            category="org.eclipse.emf.ecp"
            class="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.HistoryBrowserView"
            icon="icons/historyview.png"
            id="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.HistoryBrowserView"
            name="History Browser"
            restorable="false">
      </view>
   </extension>
   <extension
         point="org.eclipse.help.contexts">
      <contexts
            file="contexts.xml">
      </contexts>
   </extension>
   <extension
        point="org.eclipse.ui.decorators">
     <decorator
           adaptable="true"
           class="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.provider.ESBrowserLabelDecorator"
           id="org.eclipse.emf.emfstore.client.ui.views.emfstorebrowser.LoginDecorator"
           label="Login Decorator"
           lightweight="true"
           state="true">
        <enablement>
           <objectClass
                 name="org.eclipse.jface.viewers.TreeNode">
           </objectClass>
        </enablement>
     </decorator>
  </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.handlers.CheckoutProjectHandler"
            id="org.eclipse.emf.emfstore.client.ui.historybrowserview.checkout"
            name="CheckoutRevision">
      </command>
      <command
            defaultHandler="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.handlers.AddTagHandler"
            id="org.eclipse.emf.emfstore.client.ui.historybrowserview.addtag"
            name="AddTag">
      </command>
      <command
            defaultHandler="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.handlers.RemoveTagHandler"
            id="org.eclipse.emf.emfstore.client.ui.historybrowserview.removetag"
            name="RemoveTag">
      </command>
      <command
            defaultHandler="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.handlers.RevertHandler"
            id="org.eclipse.emf.emfstore.client.ui.historybrowserview.revert"
            name="RevertRevision">
      </command>
      <command
            defaultHandler="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.handlers.ForceRevertHandler"
            id="org.eclipse.emf.emfstore.client.ui.historybrowserview.forcerevert"
            name="ForceRevertRevision">
      </command>
      <command
            defaultHandler="org.eclipse.emf.emfstore.client.ui.views.historybrowserview.handlers.CompareRevisionsHandler"
            id="org.eclipse.emf.emfstore.client.ui.historybrowserview.compareRevisions"
            name="CompareRevisions">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.eclipse.emf.emfstore.client.ui.EMFStorePerspective"
            icon="icons/emfstore.png"
            id="org.eclipse.emf.emfstore.client.ui.EMFStorePerspective"
            name="EMFStore">
      </perspective>
   </extension>

</plugin>
